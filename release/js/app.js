!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=c(2),f=c(3),g=c(4),h=c(5),i=c(6),a=new d.AngularModule("a.auth",[h.iDeps.localStorage,h.iDeps.uiRouter,h.iDeps.formlyMaterial,h.iDeps.ngMessages]);a.config(g.Config),a.run(f.Run),a.registerServices([{name:e.AuthService.serviceName,config:e.AuthService}]),a.registerStates([i.States]),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=a.getModuleName()},function(a, b){"use strict";var c=function(){function a(a, b){this.moduleName=a,this.module=angular.module(a,b)}return a.prototype.getModuleName=function(){return this.module.name},a.prototype.registerStates=function(a){var b=this;this.module.config(["$stateProvider",function(c){a.forEach(function(a){console.debug("Регистрируем состояние '"+a.name+"' в модуле "+b.getModuleName()),c.state(a.name,a.config)})}])},a.prototype.registerComponent=function(a){var b=this;a.forEach(function(a){console.debug("Регистрируем компонент '"+a.name+"' в модуле "+b.getModuleName()),b.module.component(a.name,a.config)})},a.prototype.registerDirective=function(a){console.debug("Регистрируем директиву '"+a.name+"' в модуле "+this.getModuleName()),this.module.directive(a.name,a.config)},a.prototype.registerFilter=function(a){console.debug("Регистрируем фильтр '"+a.name+"' в модуле "+this.getModuleName()),this.module.filter(a.name,a.config)},a.prototype.registerServices=function(a){var b=this;a.forEach(function(a){console.debug("Регистрируем сервис '"+a.name+"' в модуле "+b.getModuleName()),b.module.service(a.name,a.config)})},a.prototype.directive=function(a,b){this.module.directive(a,b)},a.prototype.config=function(a){this.module.config(a)},a.prototype.run=function(a){this.module.run(a)},a}();b.AngularModule=c},function(a,b){"use strict";var c=function(){function a(a,b){this.$http=a,this.$localStorage=b}return a.prototype.login=function(a){var b=this;return this.$http.post("/api/auth/login",a).then(function(a){return b.$localStorage.set("token",a.data.userId+":"+a.data.token.code),!0})["catch"](function(a){return console.warn("AuthService.Login: "+a),!1})},a.prototype.logout=function(){var a=this;return this.$http.post("/api/auth/logout",{}).then(function(){a.$localStorage.remove("token")},function(a){throw console.warn("AuthService.Logout: "+a),a})},a.prototype.me=function(){return this.$http.get("/api/auth/me").then(function(a){return a.data.data})},a.serviceName="mjrAuthService",a.$inject=["$http","localStorageService"],a}();b.AuthService=c},function(a,b){"use strict";function c(a){return null!=a.match(/^\d+:.*/)}var d=function(){function a(a,b,d,e){var f=d.get("token");null!=f&&c(f)||a.go("login"),b.$on("$stateChangeError",function(b,c,d,e,f,g){console.log("state change error"),401==g.status?(console.info("go to login"),a.go("login",{from:c.name})):(console.info("go to badGateway",g),a.go("login",{from:c.name})),b.preventDefault()})}return a.$inject=["$state","$rootScope","localStorageService","$http"],a}();b.Run=d},function(a,b){"use strict";var c=function(){function a(a){a.setPrefix("auth")}return a.$inject=["localStorageServiceProvider"],a}();b.Config=c},function(a,b){"use strict";var c=function(){function a(){}return a.uiRouter="ui.router",a.fileModel="file-model",a.ngAnimate="ngAnimate",a.blockUI="blockUI",a.localStorage="LocalStorageModule",a.ngClipboard="ngClipboard",a.ngSanitize="ngSanitize",a.diffMatch="diff-match-patch",a.material="ngMaterial",a.mdTable="md.data.table",a.angularFormly="formly",a.formlyMaterial="formlyMaterial",a.ngMessages="ngMessages",a}();b.Deps=c},function(a,b,c){"use strict";var d=c(7);b.States={name:"login",config:{url:"/login?from",template:c(8),controller:d.LoginCtrl,controllerAs:"vm"}}},function(a,b,c){"use strict";var d=c(2),e=function(){function a(a,b,c){this.authService=a,this.$state=b,this.$scope=c,this.cred={email:"",password:""},this.options={},this.fields=[{key:"email",type:"input",templateOptions:{label:"Логин"}},{key:"password",type:"input",templateOptions:{label:"Пароль"}}],this.from=b.params.from}return a.prototype.login=function(){var a=this;this.$scope.$broadcast("schemaFormValidate"),this.authService.login(this.cred).then(function(b){b?(console.log(a.from),a.from?a.$state.go(a.from):a.$state.go("index.adGroups")):console.log("Не могу войти в систему","Авторизация")})},a.$inject=[d.AuthService.serviceName,"$state","$scope"],a}();b.LoginCtrl=e},function(a,b){a.exports='\n<div layout="column" flex role="main" style="height: 100%;">\n    <md-content layout="vertical" flex style="height: 100%;">\n        <div layout="row" layout-align="center center" layout-fill style="height: 100%;">\n            <md-whiteframe class="md-whiteframe-z1" layout="column" flex="30" layout-padding >\n                <md-toolbar>\n                    <div class="md-toolbar-tools">\n                        <span>Авторизация</span>\n                    </div>\n                </md-toolbar>\n                <form ng-submit="vm.login()" name="vm.form" novalidate>\n                    <formly-form model="vm.cred" fields="vm.fields" options="vm.options" form="vm.form">\n                        <md-button type="submit" class="md-raised md-primary" ng-disabled="vm.form.$invalid">Submit</md-button>\n                        <md-button type="button" class="md-raised" ng-click="vm.options.resetModel()">Reset</md-button>\n                    </formly-form>\n                </form>\n            </md-whiteframe>\n        </div>\n    </md-content>\n</div>\n'}]),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a, b, c){"use strict";var d=c(9),e=c(5),f=c(28),g=c(1),h=c(33),i=c(35),a=new g.AngularModule("restCrud",[e.iDeps.localStorage,e.iDeps.material,e.iDeps.mdTable,e.iDeps.angularFormly]);a.directive("akCrudTable",["$compile",function(a){return d.CrudTableDirective(a)}]),a.registerComponent([h.filterButtonDirective,i.filterFieldsDirective]),a.run(f.Run),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=a.getModuleName()},function(a, b){"use strict";var c=function(){function a(a, b){this.moduleName=a,this.module=angular.module(a,b)}return a.prototype.getModuleName=function(){return this.module.name},a.prototype.registerStates=function(a){var b=this;this.module.config(["$stateProvider",function(c){a.forEach(function(a){console.debug("Регистрируем состояние '"+a.name+"' в модуле "+b.getModuleName()),c.state(a.name,a.config)})}])},a.prototype.registerComponent=function(a){var b=this;a.forEach(function(a){console.debug("Регистрируем компонент '"+a.name+"' в модуле "+b.getModuleName()),b.module.component(a.name,a.config)})},a.prototype.registerDirective=function(a){console.debug("Регистрируем директиву '"+a.name+"' в модуле "+this.getModuleName()),this.module.directive(a.name,a.config)},a.prototype.registerFilter=function(a){console.debug("Регистрируем фильтр '"+a.name+"' в модуле "+this.getModuleName()),this.module.filter(a.name,a.config)},a.prototype.registerServices=function(a){var b=this;a.forEach(function(a){console.debug("Регистрируем сервис '"+a.name+"' в модуле "+b.getModuleName()),b.module.service(a.name,a.config)})},a.prototype.directive=function(a,b){this.module.directive(a,b)},a.prototype.config=function(a){this.module.config(a)},a.prototype.run=function(a){this.module.run(a)},a}();b.AngularModule=c},,,,function(a,b){"use strict";var c=function(){function a(){}return a.uiRouter="ui.router",a.fileModel="file-model",a.ngAnimate="ngAnimate",a.blockUI="blockUI",a.localStorage="LocalStorageModule",a.ngClipboard="ngClipboard",a.ngSanitize="ngSanitize",a.diffMatch="diff-match-patch",a.material="ngMaterial",a.mdTable="md.data.table",a.angularFormly="formly",a.formlyMaterial="formlyMaterial",a.ngMessages="ngMessages",a}();b.Deps=c},,,,function(a,b,c){"use strict";function d(a){return{scope:{config:"=",tmpl:"="},controller:f.CrudTableCtrl,controllerAs:"vm",restrict:"E",link:function(b,d,f,g){console.log("linking");var h="not found",i=b.config;h="adGroups"==b.tmpl?c(27):new e.Templater(i,"vm").getTemplate(),d.html(h),a(d.contents())(b),g.init(i)}}}var e=c(10),f=c(11);b.CrudTableDirective=d},function(a,b){"use strict";var c=function(){function a(a,b){this.config=a,this.ctrlAs=b}return a.prototype.getTemplate=function(){return""+this.getTabs()+this.getToolbar()+this.getTable()+this.getPagination()},a.prototype.getTabs=function(){return this.config.tab.tabs.length?""+("<md-tabs md-dynamic-height md-border-bottom md-selected='"+this.ctrlAs+".config.tab.selected'>")+('<md-tab ng-repeat="tab in '+this.ctrlAs+'.config.tab.tabs" ui-sref=\'{{tab.url}}\' label="{{tab.title}}"></md-tab>')+("</md-tabs><div>{{"+this.ctrlAs+".config.getSelectedTab()}}</div>"):""},a.prototype.getToolbar=function(){return'<md-toolbar class="md-table-toolbar md-default"><div class="md-toolbar-tools">'+("<span>"+this.config.sourceName+"</span>")+"<span flex></span>"+('<filter-button filter="'+this.ctrlAs+'.filters" fields="'+this.ctrlAs+".config.fields\" refresh-page='"+this.ctrlAs+".refreshPage()'></filter-button>")+('<md-button class="md-raised md-primary" ng-if=\''+this.config.allowedMethods.create+"' ng-click=\""+this.ctrlAs+'.create()">Создать</md-button>')+"</div></md-toolbar>"+('<md-content class="layout-padding flex" ng-show=\''+this.ctrlAs+".filters.filters.length>0'>")+('<filter-fields class="layout-padding flex" filter="'+this.ctrlAs+".filters\" refresh-page='"+this.ctrlAs+".refreshPage()' fields=\""+this.ctrlAs+'.config.fields" rels="'+this.ctrlAs+'.config.rels" rest="'+this.ctrlAs+'.config.rest"></filter-fields>')+"</md-content>"},a.prototype.getTable=function(){return"<md-table-container><table md-table>"+this.getThead()+this.getTBody()+"</table></md-table-container>"},a.prototype.getPagination=function(){return'<md-table-pagination md-limit="vm.pager.per" md-page="vm.pager.page" md-total="{{vm.pager.total}}" md-page-select></md-table-pagination>'},a.prototype.getThs=function(){var a=[];return angular.forEach(this.config.fields,function(b){null==b.parent&&a.push("<th md-column>"+b.title+"</th>")}),(this.config.allowedMethods.patch||this.config.allowedMethods["delete"])&&a.push("<th md-column>Действия</th>"),a.join("\n")},a.prototype.getThead=function(){return"<thead md-head>"+("<tr md-row>"+this.getThs()+"</tr>")+"</thead>"},a.prototype.getTBody=function(){return"<tbody md-body>"+("<tr md-row ng-repeat='o in "+this.ctrlAs+".pager.data'>")+this.getTds("o")+"</tr></tbody>"},a.prototype.getTds=function(a){var b=this,c=[];if(angular.forEach(this.config.fields,function(d){if(d.editable)switch(d.formly){case"switch":c.push('<td md-cell ><md-switch ng-model="o.'+d.name+'" ng-change="'+b.ctrlAs+".onChange(o."+d.name+",o.id,'"+d.name+'\')" aria-label="Switch 1"></md-switch></td>');break;case"autocomplete":var e="",f=!1;angular.forEach(b.config.rels,function(a){a.name==d.name&&(e=a.field,a.isInclude&&(f=!0))}),f?c.push("<td md-cell><a ng-click='"+b.ctrlAs+'.editProp($event,o, "'+d.name+'")\' class="editable-click" >{{o._relations.'+e+".name || 'Не указано'}}</a></td>"):c.push("<td md-cell><a ng-click='"+b.ctrlAs+'.editProp($event,o, "'+d.name+'")\' class="editable-click" >{{o.'+d.name+" || 'Не указано'}}</a></td>");break;case"input":c.push("<td md-cell ng-click='"+b.ctrlAs+'.editProp($event,o, "'+d.name+'")\'><a class="editable-click">{{o.'+d.name+" || 'Не указано'}}</a></td>")}else if("obj"==d.fieldType.type){var g="";angular.forEach(b.config.fields,function(c){d.name==c.parent&&(g+=""+b.getObjCell(a,c,d))}),c.push("<td md-cell>"+g+"</td>")}else d.parent||c.push("<td md-cell>"+b.getCell(a,d)+"</td>")}),this.config.allowedMethods.patch||this.config.allowedMethods.create){var d="";this.config.allowedMethods.patch&&(d+="<md-button ng-click='"+this.ctrlAs+".edit(o)' aria-label='edit' class='md-raised'><i class='fa fa-pencil'></i></md-button>"),this.config.allowedMethods["delete"]&&(d+="<md-button ng-click='"+this.ctrlAs+".delete(o)' aria-label='delete' class='md-raised'><i class='fa fa-trash-o'></i></md-button>"),c.push("<td md-cell>",""+d,"</td>")}return c.join("\n")},a.prototype.getCell=function(a,b){if("switch"==b.formly)c='<md-button ng-if="'+a+"."+b.name+'" class="md-raised md-primary md-button">Дa</md-button><md-button ng-if="!'+a+"."+b.name+'" class="md-raised md-accent md-button">Нет</md-button>';else{var c,d=this.config.getRel(b.name);c=d&&"one"==d.type?"{{"+a+"._relations."+d.field+"."+(d.displayField?d.displayField:"name")+"}}":"{{"+a+"."+b.name+"}}"}return c},a.prototype.getObjCell=function(a,b,c){var d,e=this.config.getRel(c.name);return d=e&&"one"==e.type?"{{"+a+"._relations."+e.name+"."+(e.displayField?e.displayField:"name")+"}}":b.title+": {{"+a+"."+c.name+"."+b.name+"}}<br>"},a}();b.Templater=c},function(a,b,c){"use strict";var d=c(12),e=c(14),f=c(15),g=c(18),h=c(22),i=c(23),j=c(25),k=c(13),l=c(26),m=function(){function a(a,b,c,d,e){var f=this;this.inj=a,this.$editDialog=b,this.$mdDialog=c,this.$http=d,this.$scope=e,e.$watchCollection(function(a){return a.vm.pager},function(a,b,c){a.page==b.page&&a.per==b.per||f.refreshPage()}),this.filters=new l.Filters(e.config.fields,e.config.rels)}return a.prototype.init=function(a){this.config=a,this.source=new d.Source(this.config.sourceName,this.config.url,this.inj,this.config.getIncludes(),this.filters),this.pager=new e.Pager(1,15),this.refreshPage()},a.prototype.editProp=function(a,b,c){var d=this;a.stopPropagation();var e=this.config.getField(c),g=this.config.getRel(c);e?"autocomplete"==e.formly?this.$mdDialog.show(f.getDialog(a,e,b,g,this.$mdDialog,this.source)):"input"==e.formly?this.$editDialog.small({modelValue:b[c],type:"text",targetEvent:a,save:function(a){b[c]=a.$modelValue,console.log(a.$modelValue,c);var e={};e[c]=a.$modelValue,d.source.patch(b.id,e)},placeholder:e.title}):console.log("Unsupported field type",e.fieldType,j.StrField):console.error("Field '"+c+"' not configured")},a.prototype.onPaginate=function(a,b){this.refreshPage()},a.prototype.onChange=function(a,b,c){console.log(a,b,c);var d={};d[c]=a,this.source.patch(b,d)},a.prototype.create=function(a){var b=this;this.$mdDialog.show(g.getDialog(a,this.config)).then(function(a){return b.refreshPage()})},a.prototype.edit=function(a){var b=this;this.$mdDialog.show(i.getDialog(this.config,a,this.source)).then(function(a){return b.refreshPage()})},a.prototype["delete"]=function(a){var b=this;this.$mdDialog.show(h.getDialog(this.$mdDialog,a.name)).then(function(c){b.source.remove(a.id).then(function(a){a&&(b.$mdDialog.hide(),b.refreshPage())})})},a.prototype.refreshPage=function(){var a=this;this.source.getPage((new k.Page).setPage(this.pager.page,this.pager.per)).then(function(b){a.pager.data=b.data,a.pager.total=b.items})},a.prototype.refreshResource=function(a){this.source.getOne(a.id).then(function(b){return angular.merge(a,b)})},a.$inject=["$injector","$mdEditDialog","$mdDialog","$http","$scope"],a}();b.CrudTableCtrl=m},function(a,b,c){"use strict";var d=c(13),e=function(){function a(a,b,c,d,e){this.sourceName=a,this.restUrl=b,this.inj=c,this.include=d,this.filter=e,this.$http=c.get("$http"),this.$q=c.get("$q"),this.localStorage=c.get("localStorageService"),this.state=c.get("$state"),"/left/client"!=b&&"/left/pricelab/shop"!=b?this.token=this.localStorage.get("token"):this.token="1:6273543320"}return a.prototype.getPage=function(a){var b=this,c=this.$q.defer(),d=a;return this.filter.exist()&&(d.filter=this.filter.getRestFilters()),null!=this.include&&(d.include=this.include.join(",")),this.$http.get(this.restUrl,{params:d,headers:{token:this.token}}).then(function(a){return c.resolve(a.data)})["catch"](function(a){console.error(a),c.reject(a.data),401==a.status&&b.state.go("login",{from:b.state.current.name})}),c.promise},a.prototype.getAll=function(){return this.getPage((new d.Page).setGetAll()).then(function(a){return a.data})},a.prototype.getOne=function(a){var b={};return null!=this.include&&(b.include=this.include.join(",")),this.$http.get(this.restUrl+"/"+a,{params:b,headers:{token:this.token}}).then(function(a){return a.data})},a.prototype.remove=function(a){var b=this.$q.defer();return this.$http["delete"](this.restUrl+"/"+a,{headers:{token:this.token}}).then(function(a){b.resolve(a.data)})["catch"](function(a){b.reject(a.data)}),b.promise},a.prototype.patch=function(a,b){var c=this.$q.defer();return this.$http.patch(this.restUrl+"/"+a,b,{headers:{token:this.token}}).then(function(a){c.resolve(a.data)})["catch"](function(a){c.reject(a.data)}),c.promise},a.prototype.getToken=function(){return this.token},a}();b.Source=e},function(a,b){"use strict";var c=function(){function a(){}return a.prototype.setPage=function(a,b){return this.page=a,this.per=b,this},a.prototype.setGetAll=function(){return this.getAll=!0,this},a}();b.Page=c},function(a,b){"use strict";var c=function(){function a(a,b){this.page=a,this.per=b,this.data=[],this.total=0}return a}();b.Pager=c},function(a,b,c){"use strict";var d=c(16),e=function(){function a(a,b,c,d,e,f,g,h){this.field=a,this.origin=b,this.$http=c,this.$event=d,this.rel=e,this.mdDialog=f,this.source=g}return a.prototype.querySearch=function(a){return this.$http.get(this.rel.dao,{params:{filter:"name_like_"+a},headers:{token:this.source.getToken()}}).then(function(a){return a.data.data})},a.prototype.finish=function(a){var b=this;this.origin[this.field.name]=this.selectedItem.id;var c={};c[this.field.name]=this.selectedItem.id,this.source.patch(this.origin.id,c),this.source.getOne(this.origin.id).then(function(a){d.Helper.assignegValueOfObjElement(a,b.origin)}),this.mdDialog.hide()},a.$inject=["field","origin","$http","event","rel","mdDialog","source"],a}();b.getDialog=function(a,b,d,f,g,h){var i=angular.element(document.body);return{controllerAs:"ctrlVM",parent:i,controller:e,targetEvent:a,template:c(17),clickOutsideToClose:!0,locals:{field:b,origin:d,event:a,rel:f,mdDialog:g,source:h}}}},function(a,b){"use strict";var c=function(){function a(){}return a.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},a.withPrefix=function(b,c){return b+a.capitalize(c)},a.applyMixins=function(a,b){b.forEach(function(b){Object.getOwnPropertyNames(b.prototype).forEach(function(c){a.prototype[c]=b.prototype[c]})})},a.nullObj=function(a){Object.getOwnPropertyNames(a).forEach(function(b){a[b]=null})},a.assignegValueOfObjElement=function(a,b){Object.getOwnPropertyNames(a).forEach(function(c){b[c]=a[c]})},a.handleNull=function(a){try{return a()}catch(b){return""}},a}();b.Helper=c},function(a,b){a.exports='<md-dialog aria-label="Autocomplete Dialog" ng-cloak>\n    <md-toolbar>\n        <div class="md-toolbar-tools">\n            <h2>Редактировать {{ctrlVM.field.title}}</h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="ctrlVM.mdDialog.cancel()">\n                <i class="fa fa-times"></i>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-dialog-content>\n        <div class="md-dialog-content">\n            <form ng-submit="$event.preventDefault()">\n                <p>Введите название:</p>\n                <md-autocomplete\n                        md-selected-item="ctrlVM.selectedItem"\n                        md-search-text="ctrlVM.searchText"\n                        md-items="item in ctrlVM.querySearch(ctrlVM.searchText)"\n                        md-item-text="item.name"\n                        md-min-length="0"\n                        placeholder="">\n                    <md-item-template>\n                        <span md-highlight-text="ctrlVM.searchText" md-highlight-flags="^i">{{item.name}}</span>\n                    </md-item-template>\n                    <md-not-found>\n                        Не найдено "{{ctrlVM.searchText}}".\n                    </md-not-found>\n                </md-autocomplete>\n            </form>\n        </div>\n    </md-dialog-content>\n    <md-dialog-actions>\n        <md-button aria-label="Finished" ng-click="ctrlVM.finish($event)">Завершить</md-button>\n    </md-dialog-actions>\n</md-dialog>\n'},function(a,b,c){"use strict";function d(a,b){var d=angular.element(document.body);return{parent:d,template:c(21),controller:g,controllerAs:"vm",clickOutsideToClose:!0,locals:{config:b},targetEvent:a}}var e=c(19),f=c(20),g=function(){function a(a,b,c,d){this.config=a,this.$http=b,this.$mdDialog=c,this.localStorage=d,this.schema=e.Schema.getSchema(a.fields,a.rels),this.res=f.Model.getModel(a.fields,a.rels),this.url=a.url,console.log(this.url),"/left/client"!=this.url&&"/left/pricelab/shop"!=this.url?this.token=this.localStorage.get("token"):this.token="1:6273543320"}return a.prototype.submit=function(){var a=this;return this.$http.post(this.url,this.res,{headers:{token:this.token}}).then(function(b){b&&a.$mdDialog.hide()})},a.$inject=["config","$http","$mdDialog","localStorageService"],a}();b.getDialog=d},function(a,b){"use strict";var c=function(){function a(){}return a.getSchema=function(a,b){var c=[];return angular.forEach(a,function(a){if("obj"==a.fieldType.type){var d={key:a.name,wrapper:"panel",templateOptions:{label:a.title},fieldGroup:[]};c.push(d)}else{var e={key:a.name,type:a.formly,templateOptions:{label:a.title},data:{test:function(){console.log("test!")}}};"autocomplete"==a.formly&&angular.forEach(b,function(b){b.name==a.name&&(e.data.dao=b.dao,e.data.rels=b.field)}),"switch"==a.formly&&(e.defaultValue=!1),"select"==a.formly&&(e.templateOptions.options=a.options,e.templateOptions.labelProp="prop",e.templateOptions.valueProp="prop"),a.nullable||(e.templateOptions.required=!0),a.parent?angular.forEach(c,function(b){b.key==a.parent&&b.fieldGroup.push(e)}):c.push(e)}}),c},a}();b.Schema=c},function(a,b){"use strict";var c=function(){function a(){}return a.getModel=function(a,b){var c={};return angular.forEach(a,function(a){"obj"==a.fieldType.type?c[a.name]={}:a.parent?c[a.parent][a.name]="":c[a.name]=""}),c},a}();b.Model=c},function(a,b){a.exports='<div layout="column" flex role="main" style="height: 100%;">\n    <md-content layout="vertical" flex style="height: 100%;">\n        <div layout="row" layout-align="center center" layout-fill style="height: 100%;">\n            <md-whiteframe class="md-whiteframe-z1" layout="column" flex layout-padding >\n                <md-toolbar>\n                    <div class="md-toolbar-tools">\n                        <span>Создать</span>\n                    </div>\n                </md-toolbar>\n                <form ng-submit="vm.submit()" name="vm.form" novalidate>\n                    <formly-form model="vm.res" fields="vm.schema" options="vm.options" form="vm.form">\n                        <md-button type="submit" class="md-raised md-primary" ng-disabled="vm.form.$invalid">Submit</md-button>\n                        <md-button type="button" class="md-raised" ng-click="vm.options.resetModel()">Reset</md-button>\n                    </formly-form>\n                </form>\n            </md-whiteframe>\n        </div>\n    </md-content>\n</div>'},function(a,b){"use strict";function c(a,b){return a.confirm().title("Вы действительно хотите удалить "+b+"?").ok("Удалить!").cancel("Отмена")}b.getDialog=c},function(a,b,c){"use strict";function d(a,b,d){var e=angular.element(document.body);return{parent:e,template:c(24),controller:f,controllerAs:"vm",clickOutsideToClose:!0,locals:{config:a,original:b,source:d}}}var e=c(19),f=function(){function a(a,b,c,d,f){this.config=a,this.original=b,this.source=c,this.$http=d,this.$mdDialog=f,this.schema=e.Schema.getSchema(a.fields,a.rels),this.url=a.url,this.res=angular.copy(b)}return a.prototype.submit=function(){var a=this;this.source.patch(this.res.id,this.res).then(function(b){console.log(b),b&&a.$mdDialog.hide()})},a.$inject=["config","original","source","$http","$mdDialog"],a}();b.getDialog=d},function(a,b){a.exports='<div layout="column" flex role="main" style="height: 100%;">\n    <md-content layout="vertical" flex style="height: 100%;">\n        <div layout="row" layout-align="center center" layout-fill style="height: 100%;">\n            <md-whiteframe class="md-whiteframe-z1" layout="column" flex layout-padding >\n                <md-toolbar>\n                    <div class="md-toolbar-tools">\n                        <span>Редактировать</span>\n                    </div>\n                </md-toolbar>\n                <form ng-submit="vm.submit()" name="vm.form" novalidate>\n                    <formly-form model="vm.res" fields="vm.schema" options="vm.options" form="vm.form">\n                        <md-button type="submit" class="md-raised md-primary" ng-disabled="vm.form.$invalid">Submit</md-button>\n                        <md-button type="button" class="md-raised" ng-click="vm.options.resetModel()">Reset</md-button>\n                    </formly-form>\n                </form>\n            </md-whiteframe>\n        </div>\n    </md-content>\n</div>'},function(a,b){"use strict";var c=function(){function a(b,c,d){void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=null),this.pattern=b,this.minLength=c,this.maxLength=d,this.type=a._type}return a.map=function(b){return new a(b.pattern,b.minLength,b.maxLength)},a.prototype.toSchema=function(){var a={type:"string"};return null!=this.pattern&&(a.pattern=this.pattern),null!=this.minLength&&(a.minLength=this.minLength),null!=this.maxLength&&(a.maxLength=this.maxLength),a},a._type="str",a}();b.StrField=c},function(a,b,c){"use strict";var d=c(19),e=function(){function a(a,b){this.fields=a,this.rels=b,this.schema=[],this.filters=[],this.savedFilters=[],this.saveFilter={}}return a.prototype.create=function(a){var b={name:"",title:"",parent:"",formly:"",options:[],fieldType:{type:""},value:""};b.name=a.name,b.title=a.title,b.parent=a.parent,b.formly=a.formly,b.options=a.options,b.fieldType.type=a.fieldType.type,b.value="",this.filters.push(b),this.schema=this.schema.concat(d.Schema.getSchema([b],this.rels))},a.prototype.removeField=function(a,b){a>=0?(delete this.model[b],this.filters.splice(a,1),this.schema.splice(a,1)):console.error("Index isnt specify.")},a.prototype.getRestFilters=function(){var a=this,b="";return angular.forEach(this.filters,function(c){void 0!=a.model[c.name]?"str"==c.fieldType.type?null==c.parent&&(b="base."+c.name+"_like_"+a.model[c.name]+";"+b):"int"==c.fieldType.type?b="base."+c.name+"_eqN_"+a.model[c.name]+";"+b:"bool"==c.fieldType.type&&(b="base."+c.name+"_eqB_"+a.model[c.name]+";"+b):"bool"==c.fieldType.type&&(b="base."+c.name+"_eqB_false;"+b)}),b},a.prototype.getParamsFilters=function(a){var b=this;"string"==typeof a?this.model=JSON.parse(a):"object"==typeof a&&(this.model=a),this.schema=[],this.filters=[],Object.getOwnPropertyNames(this.model).forEach(function(a){angular.forEach(b.fields,function(c){a===c.name&&b.create(c)})})},a.prototype.exist=function(){var a=!1;return this.schema.length>0&&this.filters.length>0&&(a=!0),a},a.prototype.resetFilter=function(){this.schema.length>0&&(this.schema=[]),this.filters.length>0&&(this.filters=[]),this.model={}},a}();b.Filters=e},function(a,b){a.exports='<md-tabs md-dynamic-height md-border-bottom>\n    <md-tab label="o.name"> </md-tab>\n    <md-tab label="two"> </md-tab>\n</md-tabs>\n\n<md-toolbar class="md-table-toolbar md-default">\n    <div class="md-toolbar-tools">\n        <span>{{vm.config.sourceName}}</span>\n        <span flex></span>\n        <md-button class="md-raised md-primary" ng-click="vm.create()">Создать</md-button>\n    </div>\n</md-toolbar>\n\n<md-table-container>\n    <table md-table>\n        <thead md-head md-order="query.order" md-on-reorder="onReorder">\n        <tr md-row>\n            <th md-column><span>ID</span></th>\n            <th md-column><span>Имя</span></th>\n            <th md-column>Статус</th>\n            <th md-column>Регион</th>\n            <th md-column>Бренд</th>\n            <th md-column>Модель</th>\n            <th md-column>Медиаплан</th>\n            <th md-column>Тикеты</th>\n        </tr>\n        </thead>\n        <tbody md-body>\n        <tr md-row ng-repeat="o in vm.pager.data">\n            <td md-cell>{{o.id}}</td>\n            <td md-cell>{{o.name}}</td>\n            <td md-cell>{{o.status}}</td>\n            <td md-cell ng-click="vm.editProp($event, o, \'regionId\')">{{o._relations.region.name || \'Не указано\'}}</td>\n            <td md-cell ng-click="vm.editProp($event, o, \'brandId\')">{{o._relations.brand.name || \'Не указано\'}}</td>\n            <td md-cell ng-click="vm.editProp($event, o, \'model\')">{{o.model || \'Не указанo\'}}</td>\n            <td md-cell>{{o.control}}</td>\n            <td md-cell>{{o.getAds}}</td>\n        </tr>\n        </tbody>\n    </table>\n</md-table-container>\n\n<md-table-pagination md-on-paginate="vm.onPaginate" md-limit="vm.pager.per" md-page="vm.pager.page" md-total="{{vm.pager.total}}" md-page-select></md-table-pagination>'},function(a,b,c){"use strict";var d=c(29),e=c(31),f=function(){function a(a,b,c,f){a.$on("$stateChangeSuccess",function(){var a;c("gt-sm")||(a=b("leftNav")),a&&a.isOpen()&&a.close()}),f.setType(d.AutocompleteType),f.setWrapper(e.PanelWrapper),f.setWrapper(e.FilterWrapper)}return a.$inject=["$rootScope","$mdSidenav","$mdMedia","formlyConfig"],a}();b.Run=f},function(a,b,c){"use strict";var d=c(16),e=function(){function a(a,b,c){var e=this;this.$http=a,this.scope=b,this.localStorage=c,"/left/client"!=b.options.data.dao&&"/left/pricelab/shop"!=b.options.data.dao?this.token=this.localStorage.get("token"):this.token="1:6273543320",b.model[b.options.key]&&(b.model._relations?b.searchText=b.model._relations[b.options.data.rels].name:this.$http.get(b.options.data.dao,{params:{filter:"id_eqN_"+b.model[b.options.key]},headers:{token:this.token}}).then(function(a){return b.searchText=a.data.data[0].name})),b.querySearch=function(a){return e.$http.get(b.options.data.dao,{params:{filter:"name_like_"+a},headers:{token:e.token}}).then(function(a){return a.data.data})},b.selectedItemChange=function(a){console.log("chaneged"),a?b.model[b.options.key]=a.id:b.model[b.options.key]=""},b.options.resetModel=function(){d.Helper.nullObj(b.model),b.searchText=""}}return a.prototype.finish=function(a){},a.$inject=["$http","$scope","localStorageService"],a}();b.AutocompleteType={name:"autocomplete",template:c(30),controller:e}},function(a,b){a.exports='<md-input-container><label>{{to.label}}</label><md-autocomplete\n        ng-disabled="ctrl.isDisabled"\n        md-no-cache="ctrl.noCache"\n        md-selected-item="selectedItem"\n        md-search-text-change="searchTextChange(searchText)"\n        md-search-text="searchText"\n        md-selected-item-change="selectedItemChange(item)"\n        md-items="item in querySearch(searchText)"\n        md-item-text="item.name"\n        md-min-length="0"\n    <md-item-template>\n        <span md-highlight-text="searchText" md-highlight-flags="^i">{{item.name}}</span>\n    </md-item-template>\n    <md-not-found>\n         Не найдено "{{ctrl.searchText}}".\n    </md-not-found>\n</md-autocomplete>\n</md-input-container>'},function(a,b,c){"use strict";b.LabelWrapper={name:"mdLabel",types:["autocomplete"],template:"<label>{{to.label}}</label><formly-transclude></formly-transclude>"},b.InputContainerWrapper={name:"mdInputContainer",types:["autocomplete"],template:"<md-input-container><formly-transclude></formly-transclude></md-input-container>"},b.PanelWrapper={name:"panel",template:c(32)},b.FilterWrapper={name:"FilterWrapper",template:"<md-icon ng-click=\"formOptions.data.remove(index,options.key)\" class='fa fa-times'></md-icon><formly-transclude></formly-transclude>"}},function(a,b){a.exports='<div class="panel panel-primary">\n\n    <div class="panel-heading px-nested-panel-heading clearfix">\n        <strong class="control-label" ng-if="options.templateOptions.label">\n            {{options.templateOptions.label}}\n        </strong>\n    </div>\n\n    <div class="panel-body px-nested-panel-body">\n        <formly-transclude></formly-transclude>\n    </div>\n\n\n</div>';
},function(a,b,c){"use strict";var d=function(){function a(){this.fieldsLength=this.fieldsCount(),this.saveFilter={}}return a.prototype.openMenu=function(a,b){this.originatorEv=b,a(b)},a.prototype.selectFilter=function(a){if(a){var b;this.filter.savedFilters.forEach(function(c){c.name==a&&(b=c.model)}),this.filter.getParamsFilters(b),this.refreshPage(),console.log(b)}else this.filter.resetFilter(),this.filter.saveFilter.selectedItem=null,this.refreshPage()},a.prototype.fieldsCount=function(){var a=0;return angular.forEach(this.fields,function(b){"object"!=b.formly&&null==b.parent&&(a+=1)}),a},a.prototype.isSet=function(a){var b=!1;return angular.forEach(this.filter.filters,function(c){a.name===c.name&&(b=!0)}),b},a}();b.filterButtonDirective={name:"filterButton",config:{bindings:{fields:"=",filter:"=",refreshPage:"&"},controller:d,controllerAs:"filterButtonVM",template:c(34),restrict:"E",link:function(a){console.log(a)}}}},function(a,b){a.exports='<md-menu-bar role="menubar">\n    <md-menu md-position-mode="left bottom" ng-if="filterButtonVM.filter.savedFilters.length>0">\n        <md-button ng-click="filterButtonVM.openMenu($mdOpenMenu, $event)" >\n            <span ng-if="!filterButtonVM.filter.saveFilter.selectedItem">Сохраненные фильтры</span><span ng-if="filterButtonVM.filter.saveFilter.selectedItem">Выбранный фильтр: <span style="text-transform: none;">{{filterButtonVM.filter.saveFilter.selectedItem.name}}</span></span>\n        </md-button>\n        <md-menu-content width="3">\n            <md-autocomplete\n                    ng-disabled="ctrl.isDisabled"\n                    md-no-cache="ctrl.noCache"\n                    md-selected-item="filterButtonVM.filter.saveFilter.selectedItem"\n                    md-search-text="filterButtonVM.filter.saveFilter.searchText"\n                    md-selected-item-change="filterButtonVM.selectFilter(filterButtonVM.filter.saveFilter.searchText)"\n                    md-items="item in filterButtonVM.filter.savedFilters"\n                    md-item-text="item.name"\n                    md-min-length="0"\n                    md-menu-class="autocomplete-custom-template"\n                    placeholder="Выберите фильтр">\n                <md-item-template>\n                    <span class="item-title">\n                        <span> {{item.name}} </span>\n                    </span>\n                    <span class="item-metadata">\n                        <span class="item-metastat" ng-repeat="(key, value) in item.model">\n                            <strong>{{key}}</strong> : {{ value }}<br>\n                        </span>\n                    </span>\n                </md-item-template>\n            </md-autocomplete>\n            <!--<md-menu-item ng-repeat="filter in filterButtonVM.filter.savedFilters" >-->\n                <!--<md-button >-->\n                    <!--{{filter.name}}-->\n                <!--</md-button>-->\n            <!--</md-menu-item>-->\n        </md-menu-content>\n    </md-menu>\n    <md-menu md-position-mode="left bottom" >\n        <md-button ng-click="filterButtonVM.openMenu($mdOpenMenu, $event)" ng-disabled="filterButtonVM.fieldsCount() == filterButtonVM.filter.filters.length">\n            Добавить фильтр\n        </md-button>\n        <md-menu-content width="3">\n            <md-menu-item ng-repeat="field in filterButtonVM.filter.fields" ng-if="field.formly!=\'object\'&& field.parent==null" ng-hide="filterButtonVM.isSet(field)">\n                <md-button ng-click="filterButtonVM.filter.create(field)">\n                    {{field.title}}\n                </md-button>\n            </md-menu-item>\n        </md-menu-content>\n    </md-menu>\n</md-menu-bar>'},function(a,b,c){"use strict";var d=(function(){function a(a){this.filters=a,this.data={},this.wrapper="FilterWrapper",this.data={scope:a},delete this.filters}return a}(),function(){function a(a,b,c,d){var e=this;this.$scope=a,this.state=b,this.localStorage=c,this.$mdDialog=d,this.options={data:this.filter,wrapper:"FilterWrapper"},this.test={name:"",model:{}},this.savedFilters=[],b.params.filters?this.filter.getParamsFilters(b.params.filters):c.get(b.current.name)&&(this.filter.savedFilters=JSON.parse(c.get(b.current.name))),this.filter.remove=function(a,b){e.filter.removeField(a,b),JSON.stringify(e.filter.model)!=JSON.stringify({})?e.state.params.filters=JSON.stringify(e.filter.model):e.state.params.filters=null,e.state.go(e.state.current.name,e.state.params),e.refreshPage()}}return a.prototype.submit=function(){this.state.params.filters=JSON.stringify(this.filter.model),this.state.go(this.state.current.name,this.state.params),this.refreshPage()},a.prototype.showPrompt=function(a){var b=this,c=this.$mdDialog.prompt().title("Введите название фильтра:").placeholder("Название фильтра").ariaLabel("Название фильтра").targetEvent(a).ok("Создать").cancel("Отменить");this.$mdDialog.show(c).then(function(a){b.test.name=a,b.test.model=angular.copy(b.filter.model),b.filter.savedFilters.push(b.test),b.localStorage.set(b.state.current.name,JSON.stringify(b.filter.savedFilters))})},a.prototype.saveFilter=function(){console.log(this.test)},a.$inject=["$scope","$state","localStorageService","$mdDialog"],a}());b.filterFieldsDirective={name:"filterFields",config:{bindings:{filter:"=",rels:"=",rest:"=",refreshPage:"&"},controller:d,controllerAs:"filterFieldsVM",template:c(36),restrict:"E"}}},function(a,b){a.exports='<md-input-container ng-if="filterFieldsVM.filter.saveFilter.selectedItem">\n    <label>Имя сохраненного фильтра</label>\n    <input style="font-size: 25px" ng-model="filterFieldsVM.filter.saveFilter.selectedItem.name">\n</md-input-container>\n<form novalidate>\n        <formly-form model="filterFieldsVM.filter.model" fields="filterFieldsVM.filter.schema" options="filterFieldsVM.options" >\n            <md-button ng-if="filterFieldsVM.filter.exist()" type="submit" ng-click="filterFieldsVM.submit()" ng-disabled="vm.form.$invalid">Применить</md-button>\n            <md-button ng-if="!filterFieldsVM.filter.saveFilter.selectedItem" class="md-primary md-raised" ng-click="filterFieldsVM.showPrompt($event)">Сохранить фильтр</md-button>\n            <md-button ng-if="filterFieldsVM.filter.saveFilter.selectedItem" class="md-primary md-raised">Обновить сохраненный фильтр</md-button>\n            <md-button ng-if="filterFieldsVM.filter.saveFilter.selectedItem" class=" md-danger">Удалить сохраненный фильтр</md-button>\n        </formly-form>\n </form>\n\n\n\n\n <!--<input ng-model="filterFieldsVM.test.name">-->\n<!--<md-button ng-click="filterFieldsVM.saveFilter()">Сохранить фильтр</md-button>-->'}]),!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(22),e=c(9),f=c(10),g=c(11),a=angular.module("app",[d.iDeps.uiRouter,d.iDeps.material,"restCrud","a.auth"]);e.Config.registerStates(a.name,g.states),a.run(f.Run),a.config(e.Config)},function(a, b){"use strict";var c=function(){function a(a, b, c){this.sourceName=a,this.url=b,this.allowedMethods=c,this.fields=[],this.rels=[],this.tab={selected:null,tabs:[]}}return a.prototype.setFields=function(a){return this.fields=a,this},a.prototype.setRels=function(a){return this.rels=a,this},a.prototype.setTabs=function(a){return this.tab.tabs=a,this},a.prototype.getRel=function(a){return this.rels.find(function(b){return b.name==a})},a.prototype.getField=function(a){return this.fields.find(function(b){return b.name==a})},a.prototype.getIncludes=function(){var a=[];return this.rels.forEach(function(b){b.isInclude&&a.push(b.field)}),a},a.prototype.getSelectedTab=function(){var a=this;this.tab.tabs.forEach(function(b,c){b.selected&&(a.tab.selected=c)})},a}();b.CrudTableConfig=c},function(a,b){"use strict";var c=function(){function a(a,b,c,d,e,f,g,h){void 0===g&&(g=null),void 0===h&&(h=null),this.name=a,this.title=b,this.fieldType=c,this.nullable=d,this.editable=e,this.formly=f,this.parent=g,this.options=h}return a}();b.TableField=c},function(a,b){"use strict";var c=function(){function a(b,c,d){void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=null),this.pattern=b,this.minLength=c,this.maxLength=d,this.type=a._type}return a.map=function(b){return new a(b.pattern,b.minLength,b.maxLength)},a.prototype.toSchema=function(){var a={type:"string"};return null!=this.pattern&&(a.pattern=this.pattern),null!=this.minLength&&(a.minLength=this.minLength),null!=this.maxLength&&(a.maxLength=this.maxLength),a},a._type="str",a}();b.StrField=c},function(a,b){"use strict";var c=function(){function a(b,c){void 0===b&&(b=null),void 0===c&&(c=null),this.min=b,this.max=c,this.type=a._type}return a.prototype.toSchema=function(){var a={type:"number"};return this.min&&(a.min=this.min),this.max&&(a.max=this.max),a},a.map=function(b){return new a(b.min,b.max)},a._type="int",a}();b.IntField=c},function(a,b){"use strict";var c=function(){function a(){this.type=a._type}return a.prototype.toSchema=function(){return{type:this.type}},a.map=function(b){return new a},a._type="bool",a}();b.BoolField=c},function(a,b){"use strict";var c=function(){function a(){this.type=a._type}return a.prototype.toSchema=function(){var a={type:"number"};return a},a._type="obj",a}();b.ObjField=c},function(a,b){"use strict";var c=function(){function a(a,b,c,d,e,f){void 0===f&&(f="name"),this.name=a,this.field=b,this.dao=c,this.type=d,this.isInclude=e,this.displayField=f}return a}();b.TableRel=c},function(a,b){a.exports='<div layout=row flex style=height:100%> <md-sidenav class="md-sidenav-left md-whiteframe-z3" md-component-id=leftNav md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <md-toolbar> <h3><md-button ui-sref=index>Admin</md-button></h3> </md-toolbar> <md-content role=navigation> <md-list> <md-list-item> <a class=md-button ng-click="toState(\'index.directAdGroups\')">Группы обьявлений</a> </md-list-item> <md-list-item> <a class=md-button ng-click="toState(\'index.directCampaigs\')">Кампании</a> </md-list-item> <md-list-item> <md-button ui-sref=index.brands>Бренды</md-button> </md-list-item> <md-list-item> <md-button ui-sref=index.regions>Регионы</md-button> </md-list-item> <md-list-item> <md-button ui-sref=index.users>Пользователи</md-button> </md-list-item> </md-list> </md-content> </md-sidenav> <div layout=column style=height:100% flex> <md-toolbar layout=row> <md-button ng-click="vm.toggleNav(\'leftNav\')" hide-gt-sm> BTN </md-button> </md-toolbar> <md-content ui-view> </md-content> </div> </div>'},function(a,b){"use strict";var c=function(){function a(a,b,c){a.when("","/")}return a.registerStates=function(a,b){angular.module(a).config(["$stateProvider",function(a){angular.forEach(b,function(b){a.state(b.name,b.config)})}])},a.$inject=["$urlRouterProvider","$mdThemingProvider","$mdIconProvider"],a}();b.Config=c},function(a,b){"use strict";var c=function(){function a(a,b,c,d,e){a.$on("$stateChangeSuccess",function(){var a;c("gt-sm")||(a=b("leftNav")),a&&a.isOpen()&&a.close()}),a.toState=function(b){null!=a.system?(b.replace(/direct|adwords/,a.system),d.go(b.replace(/direct|adwords/,a.system))):d.go(b)},a.$on("$stateChangeSuccess",function(b,c){-1!=c.name.indexOf("direct")?a.system="direct":-1!=c.name.indexOf("adwords")&&(a.system="adwords")})}return a.$inject=["$rootScope","$mdSidenav","$mdMedia","$state"],a}();b.Run=c},function(a,b,c){"use strict";var d=c(12),e=c(18),f=c(15),g=c(13),h=c(14),i=c(17),j=c(20),k=c(21),l=c(19),m=c(16);b.states=[d.indexState,{name:"index.adGroups",config:{url:"adGroups",template:'<ak-crud-table config="config" tmpl="\'adGroups\'">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return e.table}}}},{name:"index.directAdGroups",config:{url:"adwords/adGroups?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return e.table}}}},{name:"index.adwordsAdGroups",config:{url:"direct/adGroups?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return f.table}}}},{name:"index.clients",config:{url:"clients?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return g.table}}}},{name:"index.shops",config:{url:"shops?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return h.table}}}},{name:"index.brands",config:{url:"brands?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return i.table}}}},{name:"index.regions",config:{url:"regions?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return j.table}}}},{name:"index.users",config:{url:"users?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return k.table}}}},{name:"index.adwordsCampaigs",config:{url:"adwords/campaigs?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return m.table}}}},{name:"index.directCampaigs",config:{url:"direct/campaigs?filters",template:'<ak-crud-table config="config">',controller:["config","$scope",function(a,b){b.config=a}],resolve:{config:function(){return l.table}}}}]},function(a,b,c){"use strict";var d=function(){function a(a){this.sidenav=a}return a.prototype.toggleNav=function(a){var b=this.sidenav(a);b.toggle().then(function(a){return console.debug("nav",a)})},a.$inject=["$mdSidenav"],a}();b.indexState={name:"index",config:{url:"/",template:c(8),controllerAs:"vm",controller:d}}},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(2);b.table=new d.CrudTableConfig("Клиенты","/left/client",["PATCH"]).setFields([new f.TableField("name","Имя",new e.StrField,!1,!1,"input"),new f.TableField("login","Логин",new e.StrField,!1,!1,"input")])},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(4),g=c(7),h=c(6),i=c(2);b.table=new d.CrudTableConfig("Магазины","/left/pricelab/shop",["PATCH"]).setFields([new i.TableField("name","Название",new e.StrField,!1,!1,"input"),new i.TableField("clientId","Клиент",new f.IntField,!1,!1,"autocomplete"),new i.TableField("offersFeed","Офферы магазина",new h.ObjField,!1,!1,"object"),new i.TableField("encoding","Кодировка",new e.StrField,!1,!1,"select","offersFeed",[{prop:"utf-8"},{prop:"windows-1251"}]),new i.TableField("url","URL на xml файл с офферами",new e.StrField,!1,!1,"input","offersFeed"),new i.TableField("reportExport","Экспорт отчета",new h.ObjField,!1,!1,"object"),new i.TableField("password","Пароль",new e.StrField,!1,!1,"input","reportExport"),new i.TableField("url","URL",new e.StrField,!1,!1,"input","reportExport")]).setRels([new g.TableRel("clientId","client","/left/client","one",!1)])},function(a,b,c){"use strict";var d=c(4),e=c(3),f=c(5),g=c(1),h=c(7),i=c(2),j=c(6);b.table=new g.CrudTableConfig("Группы объявлений","/api/adwords/adGroup",{patch:!1}).setFields([new i.TableField("campaign","Кампания",new j.ObjField,!1,!1,"object"),new i.TableField("id","ID",new d.IntField,!1,!1,"input","campaign"),new i.TableField("name","Название",new e.StrField,!1,!1,"input","campaign"),new i.TableField("status","Статус",new e.StrField,!1,!1,"input","campaign"),new i.TableField("isActive","Активна",new f.BoolField,!0,!1,"switch","campaign"),new i.TableField("statusShow","Медиаплан",new f.BoolField,!0,!1,"switch","campaign"),new i.TableField("track","Отслеживать",new f.BoolField,!0,!1,"switch","campaign"),new i.TableField("id","ID",new d.IntField,!1,!1,"input"),new i.TableField("name","Название",new e.StrField,!1,!1,"input"),new i.TableField("status","Статус",new e.StrField,!1,!1,"select",null,[{prop:"ACCEPTED"},{prop:"REJECTED"}]),new i.TableField("brandId","Бренд",new d.IntField,!0,!0,"autocomplete"),new i.TableField("regionId","Регион",new d.IntField,!0,!0,"autocomplete"),new i.TableField("model","Модель",new e.StrField,!0,!0,"input"),new i.TableField("control","Медиаплан",new f.BoolField,!0,!0,"switch"),new i.TableField("getAds","Тикеты",new f.BoolField,!0,!0,"switch")]).setRels([new h.TableRel("brandId","brand","/api/refs/brand","one",!0),new h.TableRel("regionId","region","/api/refs/region","one",!0),new h.TableRel("campaignId","campaign","/api/direct/campaign","one",!0)]).setTabs([{title:"Direct",url:"index.directAdGroups"},{title:"Adwords",url:"index.adwordsAdGroups",selected:!0}])},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(4),g=c(2),h=c(5);b.table=new d.CrudTableConfig("Кампании","/api/adwords/campaign",{}).setFields([new g.TableField("id","ID",new f.IntField,!1,!1,"input"),new g.TableField("name","Имя",new e.StrField,!1,!1,"input"),new g.TableField("status","Статус",new e.StrField,!1,!1,"input"),new g.TableField("track","Отслеживать",new h.BoolField,!1,!0,"switch")]).setTabs([{title:"Direct",url:"index.directCampaigs"},{title:"Adwords",url:"index.adwordsCampaigs",selected:!0}])},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(2);b.table=new d.CrudTableConfig("Бренды","/api/refs/brand",{patch:!0,create:!0,"delete":!0}).setFields([new f.TableField("name","Название",new e.StrField,!1,!1,"input")])},function(a,b,c){"use strict";var d=c(4),e=c(3),f=c(5),g=c(1),h=c(7),i=c(2),j=c(6);b.table=new g.CrudTableConfig("Группы объявлений","/api/direct/bannerGroup",{patch:!1}).setFields([new i.TableField("campaign","Кампания",new j.ObjField,!1,!1,"object"),new i.TableField("id","ID",new d.IntField,!1,!1,"input","campaign"),new i.TableField("name","Название",new e.StrField,!1,!1,"input","campaign"),new i.TableField("status","Статус",new e.StrField,!1,!1,"input","campaign"),new i.TableField("isActive","Активна",new f.BoolField,!0,!1,"switch","campaign"),new i.TableField("statusShow","Медиаплан",new f.BoolField,!0,!1,"switch","campaign"),new i.TableField("track","Отслеживать",new f.BoolField,!0,!1,"switch","campaign"),new i.TableField("id","ID",new d.IntField,!1,!1,"input"),new i.TableField("name","Название",new e.StrField,!1,!1,"input"),new i.TableField("status","Статус",new e.StrField,!1,!1,"select",null,[{prop:"ACCEPTED"},{prop:"REJECTED"}]),new i.TableField("brandId","Бренд",new d.IntField,!0,!0,"autocomplete"),new i.TableField("regionId","Регион",new d.IntField,!0,!0,"autocomplete"),new i.TableField("model","Модель",new e.StrField,!0,!0,"input"),new i.TableField("control","Медиаплан",new f.BoolField,!0,!0,"switch"),new i.TableField("getAds","Тикеты",new f.BoolField,!0,!0,"switch")]).setRels([new h.TableRel("brandId","brand","/api/refs/brand","one",!0),new h.TableRel("regionId","region","/api/refs/region","one",!0),new h.TableRel("campaignId","campaign","/api/direct/campaign","one",!0)]).setTabs([{title:"Direct",url:"index.directAdGroups",selected:!0},{title:"Adwords",url:"index.adwordsAdGroups"}])},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(4),g=c(2),h=c(5);b.table=new d.CrudTableConfig("Кампании","/api/direct/campaign",{}).setFields([new g.TableField("id","ID",new f.IntField,!1,!1,"input"),new g.TableField("name","Имя",new e.StrField,!1,!1,"input"),new g.TableField("status","Статус",new e.StrField,!1,!1,"input"),new g.TableField("isActive","Активна",new h.BoolField,!0,!1,"switch"),new g.TableField("statusShow","Медиаплан",new h.BoolField,!0,!1,"switch"),new g.TableField("track","Отслеживать",new h.BoolField,!0,!0,"switch")]).setTabs([{title:"Direct",url:"index.directCampaigs",selected:!0},{title:"Adwords",url:"index.adwordsCampaigs"}])},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(2);b.table=new d.CrudTableConfig("Регионы","/api/refs/region",{patch:!0,create:!0,"delete":!0}).setFields([new f.TableField("name","Название",new e.StrField,!1,!1,"input")])},function(a,b,c){"use strict";var d=c(1),e=c(3),f=c(6),g=c(2);b.table=new d.CrudTableConfig("Пользователи","/api/user",{patch:!0,create:!0,"delete":!0}).setFields([new g.TableField("name","Имя",new e.StrField,!1,!1,"input"),new g.TableField("role","Роль",new f.ObjField,!1,!1,"object"),new g.TableField("name","Роль",new e.StrField,!1,!1,"select","role",[{prop:"brand"},{prop:"admin"}]),new g.TableField("email","Email",new e.StrField,!1,!1,"input")])},function(a,b){"use strict";var c=function(){function a(){}return a.uiRouter="ui.router",a.fileModel="file-model",a.ngAnimate="ngAnimate",a.blockUI="blockUI",a.localStorage="LocalStorageModule",a.ngClipboard="ngClipboard",a.ngSanitize="ngSanitize",a.diffMatch="diff-match-patch",a.material="ngMaterial",a.mdTable="md.data.table",a.angularFormly="formly",a.formlyMaterial="formlyMaterial",a.ngMessages="ngMessages",a}();b.Deps=c}]);